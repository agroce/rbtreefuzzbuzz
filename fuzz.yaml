base: ubuntu:16.04
setup: # global setup steps here
- git clone https://github.com/trailofbits/deepstate.git
- cd deepstate
- mkdir build
- cd build
- cmake ..
- sudo make install
environment: # global env vars here
- LIBFUZZER_ABORT_ON_FAIL=TRUE
targets:
- name: rbtree
  language: c++
  setup:
    - $FUZZ_C $CFLAGS -c stack.c container.c red_black_tree.c misc.c
    - $FUZZ_CXX $CXXFLAGS -DHEADLESS deepstate_harness.cpp -ldeepstate $FUZZ_ENGINER -o ./target
    - $FUZZ_CXX $CXXFLAGS ./api.o ./harness.cpp $FUZZ_ENGINE -o ./target
  harness: 
    binary: ./target
  sanitizers:
    address: 
  corpus: ./corpus